### AVL树

一棵树的任意一个节点，它的左子树高度和右子树高度的绝对值相差不会超过1。

在最差和平均情况下，插入和删除操作时间复杂度是$O(logN)$，其中N是操作之前的节点数；插入和删除可能需要重新旋转一次或多次节点。

#### 节点

AVL树的节点引入了高度(height)的属性，它表示当前节点整棵树的高度。通过height属性就可以判断节点的左右俩颗子树是否平衡

#### 平衡操作

插入和删除均会影响整棵树的平衡，具体分析如下：

插入节点

- 将新节点挂载某个叶子节点下，新节点所在的这条分支上的每个节点树的高度可能会受到影响，新插入的节点可能会使新节点所在的这条分支失去平衡，因此需要向上寻找失去平衡的节点，对其进行旋转操作。

删除节点

- 如果是叶子节点被删除，更新叶子节点所在分支的每个节点树的高度，然后做平衡处理

- 如果删除的节点只有左孩子，因为平衡性最孩子节点树的高度一定是1，同时如果只有右孩子的话，右孩子节点树的高低也是1，这种情况让孩子节点替代删除节点的环境，然后更新替代节点所在分支每个节点树的高度，再进行平衡处理

- 如果删除的节点有左右孩子，那么左右子树的节点高度之差一定不超过1，并且有俩种可能：

  如果后继节点是删除节点的右孩子，这种情况让后继节点替代删除节点，如果后继节点有孩子节点的话，该孩子节点的高度为1，并且从该孩子节点处向上更新所在分支节点树的高度；如果没有孩子节点则从后继节点处向上更新所在分支节点树，最后做平衡性处理。

  如果后继节点不是删除节点的右孩子，后继节点如果有孩子节点的话，该节点一定是高度为1的有孩子节点，这种情况同样也是替代删除节点，不同的是替换后需要找到原本后继节点所在的位置，从该位置处起向上更新所在节点树高度，并进行平衡性处理。

当插入一个节点或者删除一个节点的时候，插入位置或者删掉位置向上找到第一个不平衡的节点位置，将其不平衡的位置调整成平衡的，整颗树都会平衡了，这是一个数学结论。

AVL树有4种情况需要进行平衡性调整：RR型、LL型、LR型、RL型。
