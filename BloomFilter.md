### 布隆过滤器
布隆过滤器是一个大集合的概念，主要是为了在一个非常大的集合中确定某个数据项是否存在的一个过滤器，它会有一定的失误率；

- 失误率：如果一个数据项存在集合中，BloomFilter一定会确定该数据项在集合中，但是一个不存在集合中的数据项，BloomFilter也可能有几率认为它存在集合中。

#### 落地结构

工程上是一个大数组结构，数组中的每个位置都代表某段比特位，例如：

```php
int[] array = new int[100];
```

在这个长度100的int型数组中，array[0]表示0-31的bit位，array[1]表示32-63的bit位，所以该数据能够表示3200个bit位，每个bit位非0即1。

- 描黑操作

  先计算在哪个整数上描黑，再计算在该整数上哪个bit位上描黑，例如要在2985个bit位上描黑，先确定整数位：floor(2985/32)，再确定bit位：2985%32。

所以布隆过滤器就是比特类型的数组，一个位的数不是0就是1，假设这个数组最低位是0，最高位是m-1，长度是m，长度是m的bit位数组，实际占用大小是m/8个字节。

- 加url操作

  准备k个独立的哈希函数，分别将url哈希化，所得到的哈希值再分别模以m，结果将会得到k个0至m-1的值，这k个0至m-1的值就是要描黑的bit位。

- 查询url操作

  将之前的k个哈希函数对url进行哈希化，所得到k个哈希值分别模以m，将会得到k个0至m-1的值，取出这k个0至m-1bit位上的状态，如果都是1代表着该url在布隆过滤器中。



#### 失误率

为什么会有失误率？布隆过滤器的大小和失误率有关，如果容器太小，哈希值模以m得到的bit位重复率就很高，失误率便产生了。



#### 容器大小计算

布隆过滤器的大小与输入样本的数量、失误率的大小有关，可以认为给定样本量大小，失误率大小，求容器大小与独立哈希函数数量?

具体查证相关数学公式和证明。。。



#### 数的划分

- 问题：假定s作为基础划分数量，问一个数能进行多少次划分？

  解答：如果不满一份的数量，结果将小于1；如果满足一份的数量，结果等于1；如果超过一份的数量，结果大于1；所以x/s的结果向上取整，即是划分的次数。

  注：在计算机中由于索引是从0开始的，所以需要向下取整。