#### Hash

哈希函数又叫离散函数，Hash()它具有以下特点：

- 可接受的输入域是无穷的，返回的输出域是有限的
- 相同的输入域一定会返回相同的输出域
- 碰撞性：虽然输入域是无穷的，但是输出域是有限的，所以会导致不同的输入域对应同一个输出域
- 离散性：假定输入域无穷大，输出域是S；在输入域无穷大的情况下得到整个输出域S集合，各个输入域在整个输出域S上是平均分布的

假定输出域S是0、1、2，输入域是0至99共100个数，哈希函数能够把这100个数均匀分布这3个输出域上，这是离散性。

- 哈希函数的作用：相似规律的输入，哈希函数能够将其打乱
- 性能评价：离散性越好，该哈希函数越优良



#### 哈希表

哈希表是通过哈希函数实现的一种数据结构，它是一种键值对的数据结构，即能够通过key寻找到value；

模运算符规律：

- 模以一个数N，所得到的结果是0至N-1
- 如果将一列有序数字模以一个数N，这一列数字将会平均分布在0至N-1之间

哈希表可以是一个长度为N的数组，只不过数组中每个数据项都是链表；


- 键值对插入：key作为输入哈细化并模以N，所得到的结果作为数组索引，再将键值对插入到索引的链表上；
- get(key)：将key哈细化并模以N，所得到的结果作为索引在数组上进行定位，最后在定位的链表通过key查询即可。

哈希函数会将输入均衡分布在输出上，在哈希输出域的基础上模以N，所得到的结果也会均衡分布在0至N-1上；通过这种方式存储、查询某个数据项的时间复杂度是O(1)；

扩容：当输入域比较大的时候，因为离散特性数组中每个数据项上的链表长度也会增加，这种情况下需要进行扩容；即将数组长度翻倍，将原有哈希表中的数据取出来在新的哈希表中重新存储，时间复杂度是O(N)；

example：例如有一个长度是17的数组，即索引是0-16，有一个数据项是"左"字，经过哈希函数计算后key是2^12次方，再将其%以17，根据得到的key作为索引，将输入插入到对应索引的链表中。


### HashMap Key的计算
>> return k & (length-1)，k是哈希code，length是数组长度，是2的幂次方

哈希函数的散列特性会使输出值（哈希code）平均分布在输出域上，输出域可以理解为哈希函数的最小输出值和最大输出值的区间。

HashMap本质是通过数组来存储key的，一般计算数组的索引会使用哈希code与数组的长度进行取模运算，以此达到平均分布在数组中，
但是取模运算的计算成本比较高，因此java在计算key的索引时进行了优化。

java使数组的长度为2的幂次方，key的索引是哈希code与2的幂次方-1进行按位与运算的值，例如数组数组长度是2^4即16，16-1的二进制是1111 1111，哈希code的低八位可能是在0000 0000 至 1111 1111之间（散列特性），因此按位与运算后索引是平均分布在数组上的。

如果数组的长度不是2的幂次方，例如数组的长度是15，15-1的二进制是：1111 1110，低位上的下标为0所代表的桶将会一直是空桶，因为按位与计算后永远不会产生为1的数，所以类似0000 0001、0000 0011、0000 0111将无法使用，这样数组的使用空间就减少了，碰撞的概率就增加了，无疑降低了HashMap的性能。